--// Horse Race Show 🐴🚩🎰 + STOP Butonu
local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService")
local player = Players.LocalPlayer
local channel = TextChatService.TextChannels.RBXGeneral

-- GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Start buton
local startBtn = Instance.new("TextButton")
startBtn.Size = UDim2.new(0, 200, 0, 70)
startBtn.Position = UDim2.new(0.5, -220, 0.8, 0)
startBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
startBtn.TextColor3 = Color3.fromRGB(255, 223, 0)
startBtn.Text = "🎰 START RACE 🎲"
startBtn.Font = Enum.Font.GothamBold
startBtn.TextSize = 26
startBtn.Parent = screenGui
startBtn.AutoButtonColor = false
startBtn.BorderSizePixel = 0

local corner1 = Instance.new("UICorner")
corner1.CornerRadius = UDim.new(0, 25)
corner1.Parent = startBtn

local stroke1 = Instance.new("UIStroke")
stroke1.Thickness = 4
stroke1.Color = Color3.fromRGB(255, 215, 0)
stroke1.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
stroke1.Parent = startBtn

-- Stop buton
local stopBtn = Instance.new("TextButton")
stopBtn.Size = UDim2.new(0, 200, 0, 70)
stopBtn.Position = UDim2.new(0.5, 20, 0.8, 0)
stopBtn.BackgroundColor3 = Color3.fromRGB(60, 0, 0)
stopBtn.TextColor3 = Color3.fromRGB(255, 100, 100)
stopBtn.Text = "🛑 STOP RACE"
stopBtn.Font = Enum.Font.GothamBold
stopBtn.TextSize = 26
stopBtn.Parent = screenGui
stopBtn.AutoButtonColor = false
stopBtn.BorderSizePixel = 0

local corner2 = Instance.new("UICorner")
corner2.CornerRadius = UDim.new(0, 25)
corner2.Parent = stopBtn

local stroke2 = Instance.new("UIStroke")
stroke2.Thickness = 4
stroke2.Color = Color3.fromRGB(200, 0, 0)
stroke2.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
stroke2.Parent = stopBtn

-- Chat helper
local function send(msg)
	channel:SendAsync(msg)
end

-- Global kontrol
local running = false

-- Yarış fonksiyonu
local function startRace()
	if running then return end
	running = true

	local HORSES = {"🐴1","🐴2","🐴3","🐴4","🐴5"}
	local TRACK_LENGTH = 10
	local positions = {}

	for i = 1,#HORSES do
		positions[i] = TRACK_LENGTH
	end

	send("🏁Horseracing STARTS!🐎🚩")

	local winner = nil

	while running and not winner do
		task.wait(5)

		-- Atların ilerlemesi
		for i = 1,#HORSES do
			if positions[i] > 0 then
				positions[i] = math.max(0, positions[i] - math.random(1,3))
				if positions[i] <= 0 and not winner then
					winner = HORSES[i]
				end
			end
		end

		-- Pist çiz
		local lines = {}
		for i = 1,#HORSES do
			local track = string.rep("_", positions[i])
			table.insert(lines, HORSES[i] .. " " .. track .. "🚩")
		end
		send(table.concat(lines, "\n"))
	end

	elseif winner then
		send("🏆 " .. winner .. " WINS THE RACE!!! 🏆")
	end

	running = false
end

-- Stop fonksiyonu
local function stopRace()
	if running then
		running = false
	end
end

startBtn.MouseButton1Click:Connect(startRace)
stopBtn.MouseButton1Click:Connect(stopRace)
