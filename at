-- Horse Race GUI Script
local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Chat'e mesaj gönderme
local function send(msg)
	local channel = TextChatService.TextChannels.RBXGeneral
	channel:SendAsync(msg)
end

-- At listesi
local HORSES = {"🐴1","🐴2","🐴3","🐴4","🐴5"}
local TRACK_LENGTH = 10 -- pist uzunluğu
local FRAME_DELAY = 5 -- her frame gecikme
local running = false

-- Karıştırma fonksiyonu
local function shuffle(t)
	for i = #t, 2, -1 do
		local j = math.random(i)
		t[i], t[j] = t[j], t[i]
	end
end

-- Yarışı başlat
local function startRace()
	if running then return end
	running = true
	local length = TRACK_LENGTH

	send("🏁Horseracing STARTS!!!🐎🚩")

	while running and length > 0 do
		task.wait(FRAME_DELAY)

		-- Atları karıştır
		shuffle(HORSES)

		-- Pist çiz
		local line = table.concat(HORSES, "")
		local track = string.rep("_", length)
		send(line .. track .. "🚩")

		length -= 1
	end

	if running then
		-- Kazanan en soldaki at
		local winner = HORSES[1]
		send("🏆 " .. winner .. " WINS THE RACE!!! 🏆")
	end

	running = false
end

-- GUI oluştur
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "HorseRaceGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 140, 0, 50)
button.Position = UDim2.new(1, -160, 1, -70) -- sağ alt köşe
button.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- altın renk
button.Text = "🏇 Start Race"
button.TextScaled = true
button.Font = Enum.Font.FredokaOne
button.TextColor3 = Color3.fromRGB(0,0,0)
button.Parent = screenGui
button.AutoButtonColor = true
button.BorderSizePixel = 0
button.BackgroundTransparency = 0
button.TextStrokeTransparency = 0.3

-- Buton tıklandığında yarışı başlat
button.MouseButton1Click:Connect(function()
	if not running then
		startRace()
	end
end)
