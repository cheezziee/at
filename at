--// Horse Race 2-Stage ðŸ´ðŸš©
-- Ä°lk Ã¶nce 5 at baÅŸlar, her tur bir at elenir
-- Son 2 at kalÄ±nca gerÃ§ek yarÄ±ÅŸ baÅŸlar ve finish Ã§izgisine ulaÅŸÄ±rlar

local TextChatService = game:GetService("TextChatService")
local channel = TextChatService.TextChannels.RBXGeneral

local HORSES = {"ðŸ´1","ðŸ´2","ðŸ´3","ðŸ´4","ðŸ´5"}
local START_DISTANCE = 20 -- final turu mesafe
local DELAY = 1 -- frame sÃ¼resi

local function send(msg)
	channel:SendAsync(msg)
end

-- BaÅŸlatma
send("ðŸ Horse Race BaÅŸlÄ±yor! ðŸŽðŸš©")

-- Eleme turu
local activeHorses = {unpack(HORSES)}
while #activeHorses > 2 do
	task.wait(DELAY)

	-- Rastgele bir atÄ± ele
	local eliminatedIndex = math.random(1,#activeHorses)
	local eliminatedHorse = table.remove(activeHorses, eliminatedIndex)

	send(eliminatedHorse .. " Eliminated ðŸ’€")

	-- Kalan atlarÄ± gÃ¶ster
	send("Kalan Atlar: " .. table.concat(activeHorses, " "))
end

-- Final turu
send("ðŸ”¥ Final BaÅŸlÄ±yor! " .. activeHorses[1] .. " vs " .. activeHorses[2])

local distances = {START_DISTANCE, START_DISTANCE}
local finished = false
local winner = nil

while not finished do
	task.wait(DELAY)

	-- Ä°ki at da mesafeden ilerler
	for i = 1,2 do
		distances[i] = math.max(0, distances[i] - math.random(1,2))
		if distances[i] <= 0 and not finished then
			finished = true
			winner = activeHorses[i]
		end
	end

	-- Pist Ã§iz
	local lines = {}
	for i = 1,2 do
		local track = string.rep("_", distances[i])
		table.insert(lines, activeHorses[i] .. " " .. track .. "ðŸš©")
	end
	send(table.concat(lines, "\n"))
end

-- Kazanan
if winner then
	send("ðŸ† " .. winner .. " WINS THE RACE!!! ðŸ†")
end
