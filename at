--// Horse Race 2-Stage 🐴🚩
-- İlk önce 5 at başlar, her tur bir at elenir
-- Son 2 at kalınca gerçek yarış başlar ve finish çizgisine ulaşırlar

local TextChatService = game:GetService("TextChatService")
local channel = TextChatService.TextChannels.RBXGeneral

local HORSES = {"🐴1","🐴2","🐴3","🐴4","🐴5"}
local START_DISTANCE = 20 -- final turu mesafe
local DELAY = 1 -- frame süresi

local function send(msg)
	channel:SendAsync(msg)
end

-- Başlatma
send("🏁 Horse Race Başlıyor! 🐎🚩")

-- Eleme turu
local activeHorses = {unpack(HORSES)}
while #activeHorses > 2 do
	task.wait(DELAY)

	-- Rastgele bir atı ele
	local eliminatedIndex = math.random(1,#activeHorses)
	local eliminatedHorse = table.remove(activeHorses, eliminatedIndex)

	send(eliminatedHorse .. " Eliminated 💀")

	-- Kalan atları göster
	send("Kalan Atlar: " .. table.concat(activeHorses, " "))
end

-- Final turu
send("🔥 Final Başlıyor! " .. activeHorses[1] .. " vs " .. activeHorses[2])

local distances = {START_DISTANCE, START_DISTANCE}
local finished = false
local winner = nil

while not finished do
	task.wait(DELAY)

	-- İki at da mesafeden ilerler
	for i = 1,2 do
		distances[i] = math.max(0, distances[i] - math.random(1,2))
		if distances[i] <= 0 and not finished then
			finished = true
			winner = activeHorses[i]
		end
	end

	-- Pist çiz
	local lines = {}
	for i = 1,2 do
		local track = string.rep("_", distances[i])
		table.insert(lines, activeHorses[i] .. " " .. track .. "🚩")
	end
	send(table.concat(lines, "\n"))
end

-- Kazanan
if winner then
	send("🏆 " .. winner .. " WINS THE RACE!!! 🏆")
end
